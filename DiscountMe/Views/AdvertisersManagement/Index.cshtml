@using DiscountMe.Helpers
@model DiscountMe.BL.ViewModels.AdvertiserAdministracionViewModel
           
@{
    ViewBag.Title = "title";
}

<h2>Bienvenido @User.Identity.Name!</h2>

<aside>
    <div style="vertical-align: middle"><img  class="float-left" src="@Url.Content("~/Images/sale-icon.png")" alt=""/><h2>Ultimas Campañas</h2></div>
    @Html.Action("GetLatestDiscounts", "Home", new { count = 5 })
</aside>

<section>
    <article>
        <h2>Gestion de Ofertas</h2>
        <p>Utilice el siguiente panel para gestionar sus campañas.</p>
        
        <p>
            @Html.ActionLink("Crear Nueva", "Create", null, new {@class="button"})
        </p>
        <table>
            <thead>
                <tr style="color: white;">
                    <th></th>
                    <th>Producto</th>
                    <th>Descripción</th>
                    <th>Precio</th>
                    <th>Descuento</th>
                    <th>Stock</th>
                    <th>Stock Min</th>
                    <th>Fecha Desde</th>
                    <th>Fecha Hasta</th>
                    <th>Categoria</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tfoot>

            @foreach (var disc in Model.GetDiscounts) {
                <tr style="text-align: center;">
                    <td style="color: white;">
                        @Html.ActionLink("Editar", "Edit", new { id=disc.Id }) 
                        @Html.ActionLink("Borrar", "Delete", new { id=disc.Id })
                    </td>
                    <td >
                        @disc.ProductName
                    </td>
                    <td>
                        @disc.Description
                    </td>
                    <td>
                        @disc.Price
                    </td>
                    <td>
                        @disc.DiscountPercent
                    </td>
                    <td>
                        @disc.StockQuantity
                    </td>
                    <td>
                        @disc.StockWarningLevel
                    </td>
                    <td>
                        @if (disc.FromDate != null) {
                            @disc.FromDate.Value.ToShortDateString()
                        }
                    </td>
                    <td>
                        @if (disc.UntilDate != null) {
                            @disc.UntilDate.Value.ToShortDateString()
                        }
                    </td>
                    <td>
                        @disc.DiscountCategory.Name
                    </td>
                </tr>
            }
        </table>
        <div class="pager">
            @Html.PageLinks(Model.PagingInfo, x => Url.Action("Index", new { Page = x }))
        </div>
    </article>
</section>